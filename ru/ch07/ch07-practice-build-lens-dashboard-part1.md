# 07 Практика - Создание панели управления Lens (I)

Чтобы как можно скорее дать всем возможность начать заниматься анализом данных, мы включим некоторую теоретическую информацию в последующей части учебного пособия, а первая половина будет объяснять больше о содержании, которое можно совмещать с практикой. В этом разделе давайте создадим панель управления данными для проекта Lens Protocol.

## Что такое Lens Protocol?

Введение с [сайта Lens](https://docs.lens.xyz/docs/what-is-lens) следующее: Lens Protocol (Lens Protocol, Lens в сокращении) — это экосистема Web3 социального графа на блокчейне Polygon. Он предназначен для того, чтобы позволить создателям владеть своими связями с сообществом, формируя полностью компонуемый социальный граф, принадлежащий пользователям. Протокол был изначально разработан с учетом модульности, что позволяет добавлять новые функции и исправлять ошибки, обеспечивая при этом неизменность контента и социальных связей, принадлежащих пользователям. Lens стремится решить некоторые из основных проблем, существующих в существующих социальных сетях. Web2-сеть получает данные из ее проприетарной централизованной базы данных. Профили пользователей, дружба и контент заблокированы в определенных сетях, и право собственности на них принадлежит оператору сети. Сети конкурируют друг с другом за внимание пользователей, что превращается в игру с нулевой суммой. Lens исправляет это, будучи открытым социальным графом, принадлежащим пользователю и доступным для любого приложения. Поскольку пользователи владеют своими данными, они могут переносить их в любое приложение, созданное на основе протокола Lens. Как истинные владельцы своего контента, создатели больше не должны беспокоиться о потере своего контента, аудитории и источников дохода на основе внезапных изменений в алгоритмах и политике отдельных платформ. Кроме того, далеко идущее влияние Lens распространяется на всю экосистему. Каждое приложение, использующее протокол Lens, способствует коллективному прогрессу, превращая то, что раньше было игрой с нулевой суммой, в совместное и синергетическое начинание.

В протоколе Lens задействованы следующие роли (сущности): личный Профиль, Публикация, Комментарий, Зеркало, Коллекция, Подписка. В то же время, в протоколе существует три типа NFT, а именно: NFT Профиля, NFT Подписки и NFT Коллекции.

Типичные сценарии использования Lens включают:

- Создатели регистрируются для создания своего Профиля и чеканят свой эксклюзивный NFT Профиля. Можно установить персонализированное имя (Profile Handle Name, которое можно просто сравнить с доменным именем, то есть «Lens доменное имя»). В то же время можно установить URL-адрес изображения аватара учетной записи и правила, когда за вами следят (устанавливая специальные правила, вы можете получать доход, например, вы можете установить, что пользователи должны платить определенную плату, чтобы подписаться на Профиль). В настоящее время учетные записи профиля могут создавать только адреса в списке разрешений.
- Создатели публикуют Публикации, включая Посты, Зеркала, Комментарии и т.д.
- В соответствующих шагах операции, соответственно чеканятся и передаются 3 различных типа NFT на разные адреса пользователей.

## Основные аналитические направления протокола Lens

Для проекта, подобного Lens, мы можем проанализировать его общий обзор или провести анализ данных с разных углов и для различных типов ролей. Вот обзор некоторых вещей, которые можно проанализировать:
- Общее количество пользователей, общее количество создателей, пропорция создателей и т.д.
- Общее количество публикаций, общее количество комментариев, общее количество репостов (зеркал), общее количество подписчиков, общее количество избранных, и т.д.
- Анализ, связанный с пользователями: количество новых пользователей в день, количество новых создателей в день, количество активных пользователей в день, количество активных создателей, тренд общей активности пользователей и т.д.
- Анализ персонализированных доменных имен учетных записей Lens: количество регистраций доменных имен, статус регистрации различных типов доменных имен (чистые числа, чистые буквы, различные длины) и т.д.
- Анализ активности создателей: количество выпущенных публикаций, количество раз, когда подписывались, количество репостов (зеркал), самые популярные создатели и т.д.
- Связанный анализ публикаций: количество опубликованного контента, тренд роста, количество подписчиков, количество избранных, самые популярные публикации и т.д.
- Связанный анализ подписчиков: количество подписчиков и их изменяющиеся тренды, анализ стоимости подписчиков, пользователи, которые чаще всего подписываются на создателей и т.д.
- Связанный анализ избранных: ежедневное количество избранных, популярные избранные и т.д.
- Анализ дохода создателей: доход, полученный за счет внимания, другой доход и т.д.
- Соответствующий анализ с точки зрения NFT: ежедневное количество выпусков (минтинга), связанные с этим затраты (с акцентом на комиссии) и т.д.

Существует множество контента, который можно проанализировать. В этой панели инструментов мы используем лишь часть из них в качестве примера. Пожалуйста, попробуйте проанализировать и другой контент отдельно.
## Введение в таблицу данных

На странице [развернутого смарт-контракта](https://docs.lens.xyz/docs/deployed-contract-addresses) в официальной документации Lens указано использовать смарт-контракт LensHub Proxy (LensHub Proxy) в качестве основного контракта для взаимодействия. За исключением небольшого числа запросов, связанных с NFT, которые требуют использования таблицы данных под смарт-контрактом FollowNFT, мы в основном фокусируемся на декодированной таблице под смарт-контрактом LensHub. На рисунке ниже перечислен фрагмент таблицы данных под этим смарт-контрактом.

[Изображение: img/ch07_image_01.png]

Как упоминалось в предыдущем уроке, существуют два типа декодированных таблиц данных смарт-контракта: таблица журналов событий (Event Log) и таблица вызовов функций (Function Call). Оба типа таблиц называются в формате: `projectname_blockchain.contractName_evt_eventName` и `:projectname_blockchain.contractName_call_functionName` соответственно. Просматривая список таблиц под контрактом LensHub, мы видим следующие основные таблицы данных:
- collect/collectWithSig
- comment/commentWithSig
- createProfile
- follow/followWithSig
- mirror/mirrorWithSig
- post/postWithSig
- Transfer

За исключением таблицы Transfer, которая является таблицей событий, остальные упомянутые таблицы являются таблицами вызовов функций. Таблица данных с суффиксом `WithSig` обозначает операции, выполняемые посредством авторизации подписью. Это позволяет использовать API или позволяет другим авторизованным сторонам выполнять определенные операции от имени пользователя. Важно агрегировать данные из связанных таблиц при анализе таких типов, как таблицы постов, чтобы получить всестороннее понимание.

В предоставленном списке есть несколько других таблиц данных с различными методами. Все эти таблицы сгенерированы под смарт-контрактом LensHub, и они взаимодействуют с адресом LensHub, а именно `0xdb46d1dc155634fbc732f92e853b10b288ad5a1d`. Для анализа общих данных пользователей Lens рекомендуется запрашивать оригинальную таблицу polygon.transactions, чтобы извлечь данные, связанные с этим адресом контракта. Это обеспечит полный набор данных для целей анализа.