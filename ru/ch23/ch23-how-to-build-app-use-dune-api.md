# 23 Создание приложения с использованием API Dune

## Обзор проекта

25 апреля Dune официально открыла доступ к API для всех уровней пользователей, включая бесплатных пользователей. Теперь даже бесплатные пользователи могут получить доступ к API Dune. Этот учебный материал предоставляет демонстрацию, показывающую, как разрабатывать приложение вокруг API Dune.

Демонстрационное приложение развернуто здесь: [Watcher Demo](https://dev.lentics.xyz/).

Демонстрационное приложение было завершено в начале марта, но из-за различных причин учебный материал был отложен до настоящего времени. Мы приносим извинения за задержку. Код проекта был совместно завершен нашими коллегами Джорджем, Кеном и Бенни. Мы выражаем им нашу благодарность.

Пожалуйста, обратите внимание, что вышеуказанное демонстрационное приложение может работать не постоянно из-за ограничений API Key. Мы рекомендуем сделать форк проекта и развернуть его самостоятельно, используя свой собственный API Key, чтобы продолжить изучение.

Пользовательский интерфейс проекта показан на следующем изображении:

![](img/ch23_watcher01.jpg)

## Введение в использование Dune API

Dune API выполняется и результаты получаются на основе Query ID. Каждый сохраненный Query может быть автоматически преобразован в конечную точку доступа API. В последней версии интерфейса Query Editor вам нужно просто написать запрос, протестировать его функциональность, сохранить запрос, а затем нажать кнопку "API Endpoint", чтобы получить URL конечной точки API для доступа к результатам запроса.

```
https://api.dune.com/api/v1/query/2408388/results?api_key=<api_key>
```

Это самый простой способ доступа к набору результатов сохраненного запроса через API.

[Изображение img/ch23_watcher02.jpg]

Результат выполнения Query по умолчанию кэшируется. Если вы не выполняете Query повторно, конечная точка API, указанная выше, предоставит кэшированный результат последнего выполнения. Обычно нашим приложениям необходимо активно выполнять запросы для получения самых последних данных, соответствующих условиям, а не повторно получать кэшированные наборы результатов. Это особенно верно для приложений мониторингового типа. Поэтому нам также необходимо обращаться к конечной точке "Execute" для выполнения запроса и к конечной точке "Status" для проверки статуса выполнения запроса. Получив информацию о том, что запрос выполнен, мы можем обращаться к конечной точке "Results" для получения данных.

Полный процесс вызова API включает выполнение запроса, проверку статуса выполнения запроса и получение результатов запроса. Подробные объяснения о Dune API можно найти в документации API: [Dune API](https://dune.com/docs/api/api-reference/#latest-results-endpoint).
