# 04 Понимание таблиц данных

Платформы данных, такие как Dune, декодируют и хранят данные блокчейна в базах данных. Аналитики данных пишут SQL-запросы для анализа данных из конкретных таблиц в зависимости от их аналитических потребностей. По мере появления все большего числа блокчейн-платформ и развертывания различных проектов на разных блокчейнах, для аналитиков крайне важно быстро находить соответствующие таблицы данных для анализа и понимать значение и назначение каждого поля в таблицах. Это важнейший навык, которым должен обладать каждый аналитик.

В настоящее время структура основных наборов данных, предоставляемых несколькими платформами данных, довольно похожа. Здесь мы сосредоточимся на объяснении структуры платформы Dune. Если вы предпочитаете использовать другие платформы данных, вы можете обратиться к соответствующей документации для получения подробностей. Поскольку Dune официально объявила о полном переходе на движок запросов Dune SQL к 2023 году, мы обновили все запросы в этом руководстве до версии Dune SQL.

## Представление таблиц данных Dune V2

На Dune существует несколько типов наборов данных:

- **Raw**: хранятся необработанные данные блокчейна, включая таблицы данных, такие как `blocks`, `transactions` и `traces`. Эти таблицы необработанных данных содержат наиболее оригинальные данные Onchain и могут быть использованы для гибкого анализа данных.
- **Decoded Projects**: хранятся декодированные вызовы и события, сделанные в смарт-контракты. Например, таблицы, относящиеся к Uniswap V3 и Opensea Seaport. Dune использует ABI смарт-контрактов и интерфейс стандартизированных смарт-контрактов токенов (ERC20, ERC721 и т. д.) для декодирования данных и сохранения данных каждого события или вызова метода отдельно в таблицу данных.
- **Spells**: spells, также называемые Abstractions в Dune V1, создаются и поддерживаются Dune и сообществом через репозиторий Spellbook GitHub и компилируются с использованием dbt. Эти таблицы данных обычно более удобны и эффективны в использовании.
- **Community**: эти данные предоставляются выбранными сторонними организациями, которые напрямую передают свои данные в Dune. В настоящее время существуют два набора данных сообщества, `flashbots` и `reservoir`.
- **User Generated Tables**: в настоящее время эта функция недоступна в Dune V2, пользователи могут загружать пользовательские таблицы данных только через репозиторий Spellbook GitHub.

На странице запросов мы можем выбрать или найти необходимый набор данных через боковую панель слева. Интерфейс этого раздела показан ниже:

![](img/ch04_5-1.jpg)

Текстовое поле в середине изображения можно использовать для поиска соответствующих схем или таблиц данных. Например, ввод `erc721` отфильтрует все таблицы Spells и Decoded projects, имена которых содержат эту строку. Красная рамка над изображением используется для выбора используемого набора данных, "v2 Dune SQL", отображаемая в ней, — это то, что мы обычно называем «движком запросов Dune SQL». Dune полностью перейдет на движок запросов Dune SQL во второй половине 2023 года, поэтому пока всем нужно только быть знакомыми с синтаксисом Dune SQL.
Красная рамка внизу показывает несколько категорий наборов данных, в настоящее время поддерживаемых движком Dune V2. Щелчок по имени категории набора данных полужирным шрифтом перенесет вас на следующий уровень для просмотра различных схем данных и имен таблиц в этой категории. После этого вы также увидите раскрывающийся список с параметром по умолчанию «Все цепочки», который можно использовать для фильтрации схем данных и таблиц на указанном блокчейне. При переходе на уровень таблицы щелчок по имени таблицы расширит список полей в таблице. Щелчок по значку ">>" справа от имени таблицы вставит имя таблицы (в формате `schema_name.table_name`) в редактор запросов в текущую позицию курсора. При просмотре иерархическим способом вы также можете вводить ключевые слова для дальнейшего поиска и фильтрации на текущем уровне. Различные типы таблиц данных имеют разную глубину. Следующая картина показывает пример просмотра декодированных таблиц данных.

![](img/ch04_5-2.jpg)
